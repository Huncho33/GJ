<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.adminStats">
   <resultMap id="visitResult" type="adminStatsVO">
      <result property="v_date" column="v_date" />
      <result property="member_id" column="member_id" />
      <result property="v_gender" column="v_gender" />
      <result property="v_roadAddress" column="v_roadAddress" />
      <result property="v_birth" column="v_birth" />

   </resultMap>


   <select id="selectAllVisitList" resultMap="visitResult">
      <![CDATA[
         select v_date,member_id,v_gender,v_roadAddress,v_birth from visit order by v_date desc       
      ]]>
   </select>

   <select id="getVisitTotCnt" resultType="int">
    <![CDATA[
     select count(v_date) from visit
    ]]>
   </select>

   <!-- 검색 -->
   <select id="selectVisitListBySearchVisit"
      parameterType="java.util.Map" resultMap="visitResult">
     <![CDATA[
      SELECT * FROM visit
      WHERE v_date BETWEEN TO_DATE(#{fromDate}, 'yyyy-MM-dd') 
                   AND TO_DATE(#{toDate}, 'yyyy-MM-dd')+0.99999
                   order by v_date desc 
                  
      ]]>
   </select>
   
   <!-- 검색 수 -->
   <select id="selectSearchTotVisit" resultType="int">
   <![CDATA[
   SELECT count(v_date) FROM visit
    WHERE v_date BETWEEN TO_DATE(#{fromDate}, 'yyyy-MM-dd') 
                   AND TO_DATE(#{toDate}, 'yyyy-MM-dd')+0.99999
      ]]>
   </select>


</mapper>
   